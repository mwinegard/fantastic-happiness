<!-- public/admin.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>UNO Admin Panel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>🎮 UNO Game Admin Panel</h1>
  <div id="lobby-list"></div>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const lobbyList = document.getElementById("lobby-list");

    function renderAdmin(data) {
      if (Object.keys(data).length === 0) {
        lobbyList.innerHTML = "<p>No active lobbies.</p>";
        return;
      }

      lobbyList.innerHTML = "";
      for (const lobby in data) {
        const div = document.createElement("div");
        div.innerHTML = `<h2>Lobby: ${lobby}</h2>`;
        const ul = document.createElement("ul");
        data[lobby].players.forEach(p => {
          const li = document.createElement("li");
          li.innerHTML = `
            ${p.name} 🃏 ${p.handSize} (${p.score})
            <button onclick="kick('${lobby}', '${p.id}')">Kick</button>
          `;
          ul.appendChild(li);
        });

        const closeBtn = document.createElement("button");
        closeBtn.textContent = "Close Lobby";
        closeBtn.onclick = () => closeLobby(lobby);

        div.appendChild(ul);
        div.appendChild(closeBtn);
        lobbyList.appendChild(div);
      }
    }

    function kick(lobby, id) {
      socket.emit("admin:kick_player", { lobby, id });
    }

    function closeLobby(lobby) {
      socket.emit("admin:close_lobby", lobby);
    }

    socket.on("admin_data", renderAdmin);

    setInterval(() => {
      socket.emit("admin:get_lobbies");
    }, 3000);
  </script>
</body>
</html>
