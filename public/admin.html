<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"><title>Admin Panel</title></head>
<body>
  <h1>Admin Panel</h1>
  <button onclick="refresh()">Refresh</button>
  <div id="lobbies"></div>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    function refresh() {
      socket.emit('getLobbies');
    }
    socket.on('lobbyList', lobbies => {
      const c = document.getElementById('lobbies');
      c.innerHTML = '';
      lobbies.forEach(l => {
        c.innerHTML += `<h3>Lobby: ${l.id}
          <button onclick="closeLobby('${l.id}')">Close</button>
        </h3>`;
        l.players.forEach(p => {
          c.innerHTML += `<div>${p.name} (${p.score} pts, ${p.handSize} cards)
            <button onclick="kick('${l.id}','${p.id}')">Kick</button>
          </div>`;
        });
      });
    });
    function kick(lid, pid) {
      socket.emit('kickPlayer', { lobbyId: lid, playerId: pid });
      refresh();
    }
    function closeLobby(lid) {
      socket.emit('closeLobby', lid);
      refresh();
    }
    refresh();
  </script>
</body>
</html>
